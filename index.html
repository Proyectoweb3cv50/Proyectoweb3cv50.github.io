<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Compra el mejor pan XD">
  <title>Panaderia</title>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>

  <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js">
  </script>
  <script src="js/init.js"></script>
  <link rel="stylesheet" href="css/css.css">

</head>

<body>
  <header>
    <h1>Mi Panederia</h1>
    <nav>
      <ul>
        <li><a href="index.html" class="a_nav_inicio">Inicio</a></li>
        <li><a href="">Administrador</a></li>
        <li><a href="">Produccion</a></li>
        <li><a href="Comentarios.html">Comentarios</a></li>
      </ul>
    </nav>
  </header>
  <div class="auth_01">
    <h2>Usuario</h2>
    <fieldset>
      <legend>E-mail</legend>
      <output id="email"><progress max="100">Cargando…</progress></output>
    </fieldset>
    <fieldset>
      <legend>Nombre</legend>
      <output id="nombre"></output>
    </fieldset>
    <figure><img id="avatar" alt="Avatar"></figure>
    <div class="div_button"><button type="button" onclick="terminaSesión()">Terminar Sesión</button></div>
  </div>
  <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Beatae fugiat nihil tempora aut aspernatur, suscipit
    velit tenetur dolorum incidunt facilis vitae quis architecto dolorem? Accusantium inventore quam sint perspiciatis
    a.
    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quo inventore, officiis reiciendis maxime ad mollitia cum
    cumque? Eius perspiciatis, possimus quo, mollitia commodi, sapiente ullam impedit distinctio neque architecto velit!
    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Rerum minima modi fugiat assumenda optio vitae ratione
    culpa veritatis officia in! Incidunt doloremque nisi, iusto error autem numquam doloribus minus enim.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Facere repellat minima numquam, ratione ab dolores
    obcaecati error molestiae neque voluptatum exercitationem nihil consequatur minus sapiente commodi. Reprehenderit
    eos ut totam?
    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Minima, debitis assumenda possimus, sint doloribus cum
    praesentium vero, laborum eligendi natus exercitationem atque alias perspiciatis molestiae aliquid eaque enim veniam
    quod.
    natur, suscipit velit tenetur dolorum incidunt facilis vitae quis architecto dolorem? Accusantium inventore quam
    sint
    perspiciatis a.
    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quo inventore, officiis reiciendis maxime ad mollitia cum
    cumque? Eius perspiciatis, possimus quo, mollitia commodi, sapiente ullam impedit distinctio neque architecto velit!
    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Rerum minima modi fugiat assumenda optio vitae ratione
    culpa
    veritatis officia in! Incidunt doloremque nisi, iusto error autem numquam doloribus minus enim.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Facere repellat minima numquam, ratione ab dolores
    obcaecati
    error molestiae neque voluptatum exercitationem nihil consequatur minus sapiente commodi. Reprehenderit eos ut
    totam?
    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Minima, debitis assumenda possimus, sint doloribus cum
    praesentium vero, laborum eligendi natus exercitationem atque alias perspiciatis molestiae aliquid eaque enim veniam
    quod.
    natur, suscipit velit tenetur dolorum incidunt facilis vitae quis architecto dolorem? Accusantium inventore quam
    sint
    perspiciatis a.
    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quo inventore, officiis reiciendis maxime ad mollitia cum
    cumque? Eius perspiciatis, possimus quo, mollitia commodi, sapiente ullam impedit distinctio neque architecto velit!
    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Rerum minima modi fugiat assumenda optio vitae ratione
    culpa
    veritatis officia in! Incidunt doloremque nisi, iusto error autem numquam doloribus minus enim.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Facere repellat minima numquam, ratione ab dolores
    obcaecati
    error molestiae neque voluptatum exercitationem nihil consequatur minus sapiente commodi. Reprehenderit eos ut
    totam?
    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Minima, debitis assumenda possimus, sint doloribus cum
    praesentium vero, laborum eligendi natus exercitationem atque alias perspiciatis molestiae aliquid eaque enim veniam
    quod.
  </p>

  <footer>
    Copyright 2021 Marroquin Aquino Luis Angel
  </footer>
  <script>
    //@ts-check
    /** Conexión al sistema de autenticación de Firebase. */
    // @ts-ignore
    const auth = firebase.auth();
    /** Tipo de autenticación de usuarios. En este caso es con Google. */
    // @ts-ignore
    const provider = new firebase.auth.GoogleAuthProvider();
    /* Configura el proveedor de Google para que permita seleccionar de una
     * lista. */
    provider.setCustomParameters({ prompt: "select_account" });
    /* Recibe una función que se invoca cada que hay un cambio en la
     * autenticación y recibe el modelo con las características del usuario.*/
    auth.onAuthStateChanged(
      /** Recibe las características del usuario o null si no ha iniciado
       * sesión. */
      usuarioAuth => {
        if (usuarioAuth && usuarioAuth.email) {
          // Usuario aceptado.
          // @ts-ignore Muestra el email registrado en Google.
          email.value = usuarioAuth.email;
          // @ts-ignore Muestra el nombre registrado en Google.
          nombre.value = usuarioAuth.displayName;
          // @ts-ignore Muestra el avatar registrado en Google.
          avatar.src = usuarioAuth.photoURL;
        } else {
          // No ha iniciado sesión. Pide datos para iniciar sesión.
          auth.signInWithRedirect(provider);
        }
      },
      // Función que se invoca si hay un error al verificar el usuario. //
      procesaError
    );
    /** Termina la sesión. */
    async function terminaSesión() {
      try {
        await auth.signOut();
      } catch (e) {
        procesaError(e);
      }
    }
    /** Procesa un error. Muestra el objeto en la consola y un cuadro de
     * alerta con el mensaje.
     * @param {Error} e descripción del error. */
    function procesaError(e) {
      console.log(e);
      alert(e.message);
    }
  </script>
</body>

</html>