<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Compra el mejor pan XD">
  <title>Panaderia</title>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>

  <script src="js/init.js"></script>
  <link rel="stylesheet" href="css/css.css">
</head>

<body>
  <header>
    <h1>Mi Panederia</h1>
    <nav>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="">Administrador</a></li>
        <li><a href="">Produccion</a></li>
        <li><a href="Comentarios.html">Comentarios</a></li>
      </ul>
    </nav>
  </header>
  <div class="auth_01">
    <h2>Usuario</h2>
    <fieldset>
      <legend>E-mail</legend>
      <output id="email"><progress max="100">Cargando…</progress></output>
    </fieldset>
    <fieldset>
      <legend>Nombre</legend>
      <output id="nombre"></output>
    </fieldset>
    <figure><img id="avatar" alt="Avatar"></figure>
    <div class="div_button"><button type="button" onclick="terminaSesión()">Terminar Sesión</button></div>
  </div>
  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Mollitia magni voluptatum perspiciatis velit temporibus
    labore natus sapiente, nulla minus! Odit, voluptatem? Ratione natus eos porro nemo similique voluptates aspernatur
    fugit!
    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Placeat quo magni et quidem quae ipsum. Suscipit molestias
    veritatis aliquam delectus impedit fugiat inventore quasi, quia beatae rem? Quo, repellendus illo!
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita ipsam, nostrum quae odit quam voluptas nesciunt
    repellat reiciendis. Deleniti dignissimos deserunt molestiae consequuntur cupiditate vitae eos alias libero adipisci
    exercitationem!
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod, nisi architecto commodi itaque officiis natus ipsum
    aliquam nam deserunt, distinctio doloremque saepe vero perspiciatis! Quae possimus harum quisquam enim asperiores.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Minus, perferendis. Quos, laboriosam? Harum perspiciatis,
    voluptas, laboriosam at est veritatis, earum asperiores modi et unde ab. Explicabo ab obcaecati culpa deleniti.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt voluptatibus facilis quos dolor neque ipsa nisi
    velit animi, minus rerum obcaecati adipisci tempora quis, ut est delectus repudiandae minima illo.lorem
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Saepe aspernatur quis, corporis, veritatis itaque iste
    rerum modi obcaecati vel libero ad rem id, dolorem delectus ipsam eaque laboriosam ullam veniam?
    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Numquam dignissimos blanditiis quasi mollitia rerum iusto
    exercitationem cum ipsum minus nam quia consequuntur neque assumenda fuga, inventore aspernatur, incidunt deleniti
    ullam.
    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Odit id rem amet architecto nisi alias, veniam quod sunt
    voluptatum dolore aliquid, cumque nesciunt adipisci, libero nihil dignissimos. Officia, laborum autem.
    Lorem ipsum dolor, sit amet consectetur adipisicing elit. Nobis quidem ducimus pariatur officia delectus vel
    asperiores sit voluptatem eum adipisci maxime perspiciatis, error, cupiditate voluptates odio natus debitis dolorem
    iusto!
    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptatum quaerat ea pariatur quasi alias quae iure
    error, reiciendis in quod magni dolorum sint optio enim. Quos cumque minima error doloremque.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsa quae minus unde a. Nisi tempora fugiat, reiciendis
    cupiditate incidunt officia ab laboriosam repudiandae totam deserunt consequuntur aspernatur culpa placeat a!
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Sunt, deleniti autem? Eligendi quaerat ipsum pariatur
    recusandae ullam veritatis numquam vitae accusamus totam laboriosam. Possimus, ipsum ut! Vel sunt numquam ex!
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque sit illum obcaecati dolorum nihil officiis
    consequatur nostrum aut aliquam sint nam, at vitae quaerat aperiam nobis dicta eum non molestiae.
    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Exercitationem unde, natus quia nobis inventore debitis
    quibusdam neque assumenda labore dolores blanditiis doloribus recusandae eos qui corporis excepturi veniam est
    repudiandae.
  </p>
  <footer>
    Copyright 2021 Marroquin Aquino Luis Angel
  </footer>
  <script>
    //@ts-check
    /** Conexión al sistema de autenticación de Firebase. */
    // @ts-ignore
    const auth = firebase.auth();
    /** Tipo de autenticación de usuarios. En este caso es con Google. */
    // @ts-ignore
    const provider = new firebase.auth.GoogleAuthProvider();
    /* Configura el proveedor de Google para que permita seleccionar de una
     * lista. */
    provider.setCustomParameters({ prompt: "select_account" });
    /* Recibe una función que se invoca cada que hay un cambio en la
     * autenticación y recibe el modelo con las características del usuario.*/
    auth.onAuthStateChanged(
      /** Recibe las características del usuario o null si no ha iniciado
       * sesión. */
      usuarioAuth => {
        if (usuarioAuth && usuarioAuth.email) {
          // Usuario aceptado.
          // @ts-ignore Muestra el email registrado en Google.
          email.value = usuarioAuth.email;
          // @ts-ignore Muestra el nombre registrado en Google.
          nombre.value = usuarioAuth.displayName;
          // @ts-ignore Muestra el avatar registrado en Google.
          avatar.src = usuarioAuth.photoURL;
        } else {
          // No ha iniciado sesión. Pide datos para iniciar sesión.
          auth.signInWithRedirect(provider);
        }
      },
      // Función que se invoca si hay un error al verificar el usuario. //
      procesaError
    );
    /** Termina la sesión. */
    async function terminaSesión() {
      try {
        await auth.signOut();
      } catch (e) {
        procesaError(e);
      }
    }
    /** Procesa un error. Muestra el objeto en la consola y un cuadro de
     * alerta con el mensaje.
     * @param {Error} e descripción del error. */
    function procesaError(e) {
      console.log(e);
      alert(e.message);
    }
  </script>
</body>

</html>